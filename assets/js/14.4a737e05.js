(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{307:function(t,s,a){"use strict";a.r(s);var n=a(39),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"intersectionobserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intersectionobserver","aria-hidden":"true"}},[t._v("#")]),t._v(" IntersectionObserver")]),t._v(" "),a("p",[t._v("ä½¿ç”¨åœºæ™¯")]),t._v(" "),a("ul",[a("li",[t._v("åˆ¤æ–­ DOM å‡ºç°åœ¨å±å¹•ä¸Šä»¥è®°å½•æµè§ˆé‡")]),t._v(" "),a("li",[t._v("å®ç° img æ ‡ç­¾çš„æ‡’åŠ è½½")]),t._v(" "),a("li",[t._v("åšä¸€äº›æ•°æ®ä¸ŠæŠ¥...")])]),t._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯-intersectionobserverï¼Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-intersectionobserverï¼Ÿ","aria-hidden":"true"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ IntersectionObserverï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("**IntersectionObserver**")]),a("strong",[t._v("æ¥å£")]),t._v(" (ä»å±äº"),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("Intersection Observer API"),a("OutboundLink")],1),t._v(") æä¾›äº†ä¸€ç§å¼‚æ­¥è§‚å¯Ÿç›®æ ‡å…ƒç´ ä¸å…¶ç¥–å…ˆå…ƒç´ æˆ–é¡¶çº§æ–‡æ¡£è§†çª—("),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Glossary/viewport",target:"_blank",rel:"noopener noreferrer"}},[t._v("viewport"),a("OutboundLink")],1),t._v(")äº¤å‰çŠ¶æ€çš„æ–¹æ³•ã€‚ç¥–å…ˆå…ƒç´ ä¸è§†çª—("),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Glossary/viewport",target:"_blank",rel:"noopener noreferrer"}},[t._v("viewport"),a("OutboundLink")],1),t._v(")è¢«ç§°ä¸º"),a("strong",[t._v("æ ¹(root)ã€‚")])]),t._v(" "),a("p",[t._v("å½“ä¸€ä¸ª"),a("code",[t._v("IntersectionObserver")]),t._v("å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå…¶è¢«é…ç½®ä¸ºç›‘å¬æ ¹ä¸­ä¸€æ®µç»™å®šæ¯”ä¾‹çš„å¯è§åŒºåŸŸã€‚ä¸€æ—¦ IntersectionObserver è¢«åˆ›å»ºï¼Œåˆ™æ— æ³•æ›´æ”¹å…¶é…ç½®ï¼Œæ‰€ä»¥ä¸€ä¸ªç»™å®šçš„è§‚å¯Ÿè€…å¯¹è±¡åªèƒ½ç”¨æ¥ç›‘å¬å¯è§åŒºåŸŸçš„ç‰¹å®šå˜åŒ–å€¼ï¼›ç„¶è€Œï¼Œä½ å¯ä»¥åœ¨åŒä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡ä¸­é…ç½®ç›‘å¬å¤šä¸ªç›®æ ‡å…ƒç´ ã€‚")])]),t._v(" "),a("p",[t._v("é‡ç‚¹çœ‹è¿™é‡Œ"),a("strong",[t._v("ç›‘å¬ç›®æ ‡å…ƒç´ ä¸å…¶ç¥–å…ˆæˆ–è§†çª—äº¤å‰çŠ¶æ€çš„æ‰‹æ®µ")]),t._v("ï¼Œå…¶å®å°±æ˜¯è§‚å¯Ÿä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨è§†çª—å¯è§ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/04/RqPLZ2GSgIeDOYs.png",alt:""}})]),t._v(" "),a("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œäº¤å‰äº†å°±æ˜¯è¯´æ˜å½“å‰å…ƒç´ åœ¨è§†çª—é‡Œï¼Œå½“å‰å°±æ˜¯å¯è§çš„äº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" io "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ„é€ å‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("ä»¥ä¸Šä»£ç ä¼šè¿”å›ä¸€ä¸ª"),a("code",[t._v("IntersectionObserver")]),t._v("å®ä¾‹ï¼Œ"),a("code",[t._v("callback")]),t._v("æ˜¯å½“å…ƒç´ çš„å¯è§æ€§å˜åŒ–æ—¶å€™çš„å›è°ƒå‡½æ•°ï¼Œ"),a("code",[t._v("options")]),t._v("æ˜¯ä¸€äº›é…ç½®é¡¹ï¼ˆå¯é€‰ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ä½¿ç”¨è¿”å›çš„è¿™ä¸ªå®ä¾‹æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  å¼€å§‹è§‚å¯Ÿï¼Œæ¥å—ä¸€ä¸ª"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v("èŠ‚ç‚¹å¯¹è±¡\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‹é¢ä¸¤ä¸ªå‡½æ•°å¾ˆæœ‰ç”¨ï¼Œåœ¨åˆé€‚çš„æ—¶å€™åœæ­¢å’Œå…³é—­è§‚å¯Ÿå™¨æœ‰åˆ©äºèŠ‚çœæ€§èƒ½")]),t._v("\nio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unobserve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   åœæ­¢è§‚å¯Ÿ æ¥å—ä¸€ä¸ªelementå…ƒç´ \nio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("disconnect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" å…³é—­è§‚å¯Ÿå™¨\n")])])]),a("h3",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options","aria-hidden":"true"}},[t._v("#")]),t._v(" options")]),t._v(" "),a("p",[t._v("root")]),t._v(" "),a("p",[t._v("ç”¨äºè§‚å¯Ÿçš„æ ¹å…ƒç´ ï¼Œé»˜è®¤æ˜¯æµè§ˆå™¨çš„è§†å£ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“å…ƒç´ ï¼ŒæŒ‡å®šå…ƒç´ çš„æ—¶å€™ç”¨äºè§‚å¯Ÿçš„å…ƒç´ å¿…é¡»æ˜¯æŒ‡å®šå…ƒç´ çš„å­å…ƒç´ ")]),t._v(" "),a("p",[t._v("threshold")]),t._v(" "),a("p",[t._v("ç”¨æ¥æŒ‡å®šäº¤å‰æ¯”ä¾‹ï¼Œå†³å®šä»€ä¹ˆæ—¶å€™è§¦å‘å›è°ƒå‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé»˜è®¤æ˜¯"),a("code",[t._v("[0]")]),t._v("ã€‚ä»–ä»£è¡¨çš„æ˜¯"),a("strong",[t._v("è§‚å¯Ÿçš„å…ƒç´ å‡ºç°åœ¨è§†å›¾ä¸­çš„é«˜åº¦ï¼ˆæˆ–è§‚å¯Ÿçš„ root èŠ‚ç‚¹ï¼‰ä¸ä»–è‡ªèº«çš„é«˜åº¦çš„ç™¾åˆ†æ¯”")]),t._v("ï¼Œ å¦‚æœä¸å…³é—­è§‚å¯Ÿå™¨ï¼Œåˆ™å›è°ƒå‡½æ•°ä¼šåœ¨æ•°ç»„ä¸­çš„æ¯ä¸ªä¸´ç•Œç‚¹è§¦å‘ã€‚è¿™æ˜¯ä¸€ä¸ªå·¦å¼€å³é—­çš„åŒºé—´ï¼Œä¹‹æ‰€ä»¥è¿™æ ·è¯´è¯·çœ‹æ¡ˆä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    threshold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" io "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬æŒ‡å®šäº†äº¤å‰æ¯”ä¾‹ä¸º 0ï¼Œ0.5ï¼Œ1ï¼Œå½“è§‚å¯Ÿå…ƒç´  img0%ã€50%ã€100%æ—¶å€™éƒ½ä¼šè§¦å‘å›è°ƒå‡½æ•°ï¼Œä½ ä»¥ä¸ºåªä¼šè§¦å‘ä¸‰æ¬¡å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œå…¶å®ä»–è§¦å‘äº†å››æ¬¡å›è°ƒï¼Œå¦‚ä¸‹å›¾")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/04/hxH1i3bdltp2qOk.jpg",alt:""}})]),t._v(" "),a("p",[t._v("intersectionRatio ä»£è¡¨äº†äº¤å‰æ¯”ä¾‹ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºåœ¨å…ƒç´ è¿˜æ²¡å‡ºç°åœ¨è§†å›¾ä¸­æ—¶å·²ç»è°ƒç”¨äº†ä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œæ­¤æ—¶ intersectionRatio ä¸º 0ï¼Œè¿™å°±æ˜¯ä¸Šé¢æåˆ°çš„å·¦å¼€å³é—­ï¼Œ0 è¿™ä¸ªä¸´ç•Œç‚¹æ¯”è¾ƒç‰¹æ®Šï¼Œä»–ä¼šåœ¨å·¦å³åŒºé—´éƒ½è§¦å‘å›è°ƒã€‚ï¼ˆå¦‚ä¸å…³é—­è§‚å¯Ÿå™¨åˆ™å›è°ƒä¼šåœ¨æ¯æ¬¡ç»è¿‡ä¸´ç•Œç‚¹è§¦å‘ï¼‰")]),t._v(" "),a("p",[t._v("rootMargin")]),t._v(" "),a("p",[t._v("ç”¨æ¥æ‰©å¤§æˆ–è€…ç¼©å°è§†çª—çš„çš„å¤§å°ï¼Œä½¿ç”¨ css çš„å®šä¹‰æ–¹æ³•ï¼Œ"),a("code",[t._v("10px 10px 30px 20px")]),t._v("è¡¨ç¤º topã€rightã€bottom å’Œ left çš„å€¼")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.box'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    threshold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    rootMargin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'30px 100px 20px'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ç”»äº†å¼ å›¾ï¼Œå¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/04/9e7prS6nPGYxgCo.png",alt:"img"}})]),t._v(" "),a("p",[t._v("options")]),t._v(" "),a("p",[t._v("é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹å›¾ä¸Šçš„é—®é¢˜ï¼Œè“çº¿æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»–å°±æ˜¯å’±ä»¬å®šä¹‰çš„ root å…ƒç´ ï¼Œæˆ‘ä»¬æ·»åŠ äº†"),a("code",[t._v("rootMargin")]),t._v("å±æ€§ï¼Œå°†è§†çª—çš„å¢å¤§äº†ï¼Œè™šçº¿å°±æ˜¯ç°åœ¨çš„è§†çª—ï¼Œæ‰€ä»¥å…ƒç´ ç°åœ¨ä¹Ÿå°±åœ¨è§†çª—é‡Œé¢äº†ã€‚")]),t._v(" "),a("p",[t._v("ç”±æ­¤å¯è§ï¼Œroot å…ƒç´ åªæœ‰åœ¨"),a("code",[t._v("rootMargin")]),t._v("ä¸ºç©ºçš„æ—¶å€™æ‰æ˜¯ç»å¯¹çš„è§†çª—ã€‚")]),t._v(" "),a("p",[t._v("è¯´äº†ç®€å•çš„ optionsï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹"),a("code",[t._v("callback")]),t._v("ã€‚")]),t._v(" "),a("h3",{attrs:{id:"callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#callback","aria-hidden":"true"}},[t._v("#")]),t._v(" callback")]),t._v(" "),a("p",[t._v("ä¸Šé¢æˆ‘ä»¬è¯´åˆ°ï¼Œå½“å…ƒç´ çš„å¯è§æ€§å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘ callback å‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("callback å‡½æ•°ä¼šè§¦å‘ä¸¤æ¬¡ï¼Œå…ƒç´ è¿›å…¥è§†çª—ï¼ˆå¼€å§‹å¯è§æ—¶ï¼‰å’Œå…ƒç´ ç¦»å¼€è§†çª—ï¼ˆå¼€å§‹ä¸å¯è§æ—¶ï¼‰éƒ½ä¼šè§¦å‘")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" io "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ä»¥ä¸Šä»£ç ï¼Œè¯·åœ¨ chrome æ§åˆ¶å°è¿›è¡Œè°ƒè¯•ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†"),a("code",[t._v("$0")]),t._v("é€‰æ‹©äº†ä¸Šä¸€æ¬¡æˆ‘å®¡æŸ¥å…ƒç´ çš„é€‰æ‹©çš„èŠ‚ç‚¹")]),t._v(" "),a("p",[t._v("è¿è¡Œç»“æœå¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/04/lK4OTxnIyD8MwGe.png",alt:"img"}})]),t._v(" "),a("p",[t._v("è¿è¡Œç»“æœ")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å¯ä»¥çœ‹åˆ° callback å‡½æ•°æœ‰ä¸ª"),a("code",[t._v("entries")]),t._v("å‚æ•°ï¼Œå®ƒæ˜¯ä¸ª"),a("code",[t._v("IntersectionObserverEntry")]),t._v("å¯¹è±¡æ•°ç»„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹è¯´ä¸‹ IntersectionObserverEntry å¯¹è±¡")]),t._v(" "),a("h3",{attrs:{id:"intersectionobserverentry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intersectionobserverentry","aria-hidden":"true"}},[t._v("#")]),t._v(" IntersectionObserverEntry")]),t._v(" "),a("p",[a("code",[t._v("IntersectionObserverEntry")]),t._v("æä¾›è§‚å¯Ÿå…ƒç´ çš„ä¿¡æ¯ï¼Œæœ‰ä¸ƒä¸ªå±æ€§ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("boundingClientRect ç›®æ ‡å…ƒç´ çš„çŸ©å½¢ä¿¡æ¯\nintersectionRatio ç›¸äº¤åŒºåŸŸå’Œç›®æ ‡å…ƒç´ çš„æ¯”ä¾‹å€¼ intersectionRect/boundingClientRect ä¸å¯è§æ—¶å°äºç­‰äº 0\nintersectionRect ç›®æ ‡å…ƒç´ å’Œè§†çª—ï¼ˆæ ¹ï¼‰ç›¸äº¤çš„çŸ©å½¢ä¿¡æ¯ å¯ä»¥ç§°ä¸ºç›¸äº¤åŒºåŸŸ\nisIntersecting ç›®æ ‡å…ƒç´ å½“å‰æ˜¯å¦å¯è§ Boolean å€¼ å¯è§ä¸º true\nrootBounds æ ¹å…ƒç´ çš„çŸ©å½¢ä¿¡æ¯ï¼Œæ²¡æœ‰æŒ‡å®šæ ¹å…ƒç´ å°±æ˜¯å½“å‰è§†çª—çš„çŸ©å½¢ä¿¡æ¯\ntarget è§‚å¯Ÿçš„ç›®æ ‡å…ƒç´ \ntime è¿”å›ä¸€ä¸ªè®°å½•ä»"),a("code",[t._v("IntersectionObserver")]),t._v("çš„æ—¶é—´åˆ°äº¤å‰è¢«è§¦å‘çš„æ—¶é—´çš„æ—¶é—´æˆ³")])]),t._v(" "),a("p",[t._v("ä¸Šé¢å‡ ä¸ªçŸ©å½¢ä¿¡æ¯çš„å…³ç³»å¦‚ä¸‹")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/04/utVbx8SLPQemkIh.png",alt:"img"}})]),t._v(" "),a("p",[t._v("å…³ç³».png")]),t._v(" "),a("p",[t._v("ğŸ‘‡ åˆ’é‡ç‚¹")]),t._v(" "),a("p",[a("strong",[t._v("intersectionRatio")]),t._v("å’Œ"),a("strong",[t._v("isIntersecting")]),t._v("æ˜¯ç”¨æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§çš„ï¼ŒæŠ¼é¢˜å’¯...")]),t._v(" "),a("h3",{attrs:{id:"æ‡’åŠ è½½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ‡’åŠ è½½","aria-hidden":"true"}},[t._v("#")]),t._v(" æ‡’åŠ è½½")]),t._v(" "),a("p",[t._v("å¥½äº†ï¼Œé€šè¿‡ä¸Šé¢ä¸€äº›æ¦‚å¿µæˆ‘ä»¬å¤§æ¦‚äº†è§£äº†"),a("code",[t._v("IntersectionObserver")]),t._v("æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨å®ƒæ¥å†™ç‚¹ä»£ç ï¼Œå†™ä»€ä¹ˆå‘¢ï¼Ÿæ²¡é”™å°±æ˜¯æ‡’åŠ è½½ã€‚")]),t._v(" "),a("p",[t._v("é€šè¿‡ IntersectionObserver æ¥å®ç°æ‡’åŠ è½½ï¼Œå°±ç®€å•çš„å¤šäº†ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®å›è°ƒï¼Œåˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å¯è§ï¼Œå†è¿›è¡Œæ¸²æŸ“æ“ä½œå°±è¡Œäº†ï¼Œè€Œä¸ç”¨å»å…³å¿ƒå†…éƒ¨çš„è®¡ç®—ã€‚")]),t._v(" "),a("p",[t._v("ä¸»è¦ä»£ç å¦‚ä¸‹")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" io "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹åŒ– é»˜è®¤åŸºäºå½“å‰è§†çª—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ings "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[data-src]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†å›¾ç‰‡çš„çœŸå®urlè®¾ç½®ä¸ºdata-src srcå±æ€§ä¸ºå ä½å›¾ å…ƒç´ å¯è§æ—¶å€™æ›¿æ¢src")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éå†entriesæ•°ç»„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isIntersecting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰å…ƒç´ å¯è§")]),t._v("\n      item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›¿æ¢src")]),t._v("\n      io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unobserve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœæ­¢è§‚å¯Ÿå½“å‰å…ƒç´  é¿å…ä¸å¯è§æ—¶å€™å†æ¬¡è°ƒç”¨callbackå‡½æ•°")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nimgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// io.observeæ¥å—ä¸€ä¸ªDOMå…ƒç´ ï¼Œæ·»åŠ å¤šä¸ªç›‘å¬ ä½¿ç”¨forEach")]),t._v("\n  io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"âš ï¸-æ³¨æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#âš ï¸-æ³¨æ„","aria-hidden":"true"}},[t._v("#")]),t._v(" âš ï¸ æ³¨æ„")]),t._v(" "),a("p",[t._v("ç›®å‰ IntersectionObserver æ˜¯ä¸€ä¸ªå®éªŒä¸­çš„åŠŸèƒ½ï¼Œè¯·é…Œæƒ…ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/04/PwVQNluJOBj8pfZ.png",alt:"img"}})]),t._v(" "),a("p",[t._v("è½¬è½½ä½œè€…ï¼šan ç¥­\né“¾æ¥ï¼šhttps://www.jianshu.com/p/84a86e41eb2b")])])},[],!1,null,null,null);s.default=e.exports}}]);