<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS 类型隐式转换 | XiaoXin</title>
    <meta name="description" content="Everything Is Esay">
    <link rel="shortcut icon" href="/blog/favicon.ico">
  <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/blog/assets/css/0.styles.c98d2fd1.css" as="style"><link rel="preload" href="/blog/assets/js/app.2ae5fea5.js" as="script"><link rel="preload" href="/blog/assets/js/2.6a053b7f.js" as="script"><link rel="preload" href="/blog/assets/js/21.6661e953.js" as="script"><link rel="preload" href="/blog/assets/js/4.2282b1d2.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.24a80492.js"><link rel="prefetch" href="/blog/assets/js/11.15dd0e81.js"><link rel="prefetch" href="/blog/assets/js/12.80be22dc.js"><link rel="prefetch" href="/blog/assets/js/13.8f3eea23.js"><link rel="prefetch" href="/blog/assets/js/14.4a737e05.js"><link rel="prefetch" href="/blog/assets/js/15.eb07cf8a.js"><link rel="prefetch" href="/blog/assets/js/16.36d73765.js"><link rel="prefetch" href="/blog/assets/js/17.17bc1d4d.js"><link rel="prefetch" href="/blog/assets/js/18.dc604255.js"><link rel="prefetch" href="/blog/assets/js/19.dba65164.js"><link rel="prefetch" href="/blog/assets/js/20.b1e13490.js"><link rel="prefetch" href="/blog/assets/js/22.b46aff83.js"><link rel="prefetch" href="/blog/assets/js/23.f9a4866a.js"><link rel="prefetch" href="/blog/assets/js/24.abc1ee8e.js"><link rel="prefetch" href="/blog/assets/js/25.5c6de7f7.js"><link rel="prefetch" href="/blog/assets/js/26.f0a361d6.js"><link rel="prefetch" href="/blog/assets/js/27.170936fa.js"><link rel="prefetch" href="/blog/assets/js/28.7899db47.js"><link rel="prefetch" href="/blog/assets/js/29.a7194b2b.js"><link rel="prefetch" href="/blog/assets/js/3.ebad0fee.js"><link rel="prefetch" href="/blog/assets/js/30.b2dee036.js"><link rel="prefetch" href="/blog/assets/js/31.c1603b7d.js"><link rel="prefetch" href="/blog/assets/js/32.9b4872ae.js"><link rel="prefetch" href="/blog/assets/js/33.0c4a6762.js"><link rel="prefetch" href="/blog/assets/js/34.216a6e8c.js"><link rel="prefetch" href="/blog/assets/js/35.c4da4fba.js"><link rel="prefetch" href="/blog/assets/js/36.4004ae2a.js"><link rel="prefetch" href="/blog/assets/js/37.970402d3.js"><link rel="prefetch" href="/blog/assets/js/38.5940f18d.js"><link rel="prefetch" href="/blog/assets/js/39.a9f7a9d7.js"><link rel="prefetch" href="/blog/assets/js/40.cab95d99.js"><link rel="prefetch" href="/blog/assets/js/41.c43504e7.js"><link rel="prefetch" href="/blog/assets/js/42.fea032c4.js"><link rel="prefetch" href="/blog/assets/js/43.d981b84c.js"><link rel="prefetch" href="/blog/assets/js/44.e469946c.js"><link rel="prefetch" href="/blog/assets/js/45.498af734.js"><link rel="prefetch" href="/blog/assets/js/46.5c5381de.js"><link rel="prefetch" href="/blog/assets/js/47.ade54cb1.js"><link rel="prefetch" href="/blog/assets/js/48.543817c4.js"><link rel="prefetch" href="/blog/assets/js/49.170032f2.js"><link rel="prefetch" href="/blog/assets/js/5.bbd49a80.js"><link rel="prefetch" href="/blog/assets/js/50.fdcebebc.js"><link rel="prefetch" href="/blog/assets/js/51.4688ae90.js"><link rel="prefetch" href="/blog/assets/js/52.2f859e2a.js"><link rel="prefetch" href="/blog/assets/js/53.46f20752.js"><link rel="prefetch" href="/blog/assets/js/54.8c4e2bde.js"><link rel="prefetch" href="/blog/assets/js/55.966bf42b.js"><link rel="prefetch" href="/blog/assets/js/56.93296c52.js"><link rel="prefetch" href="/blog/assets/js/57.c0e84a0a.js"><link rel="prefetch" href="/blog/assets/js/58.9c4fac4f.js"><link rel="prefetch" href="/blog/assets/js/59.18ed476c.js"><link rel="prefetch" href="/blog/assets/js/6.3b02335f.js"><link rel="prefetch" href="/blog/assets/js/60.e3ca94f3.js"><link rel="prefetch" href="/blog/assets/js/61.d40e0732.js"><link rel="prefetch" href="/blog/assets/js/62.952d91f1.js"><link rel="prefetch" href="/blog/assets/js/63.03715906.js"><link rel="prefetch" href="/blog/assets/js/64.6dce55d6.js"><link rel="prefetch" href="/blog/assets/js/65.fea30c40.js"><link rel="prefetch" href="/blog/assets/js/66.21bee15e.js"><link rel="prefetch" href="/blog/assets/js/7.64ef9703.js"><link rel="prefetch" href="/blog/assets/js/8.c33961b5.js"><link rel="prefetch" href="/blog/assets/js/9.61bba5ba.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.c98d2fd1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">XiaoXin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/HTML+CSS/" class="nav-link">HTML+CSS</a></div><div class="nav-item"><a href="/blog/JavaScript/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/blog/React/" class="nav-link">React</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/VuePress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/electron/" class="nav-link">electron</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vue官方文档解读/" class="nav-link">vue官方文档解读</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/关于双向绑定的探索/" class="nav-link">关于双向绑定的探索</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/源码学习/" class="nav-link">源码学习</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/问题记录/" class="nav-link">问题记录</a></li></ul></div></div><div class="nav-item"><a href="/blog/命名规范/" class="nav-link">命名规范</a></div><div class="nav-item"><a href="/blog/图床/" class="nav-link">图床</a></div><div class="nav-item"><a href="/blog/大前端/" class="nav-link">大前端</a></div> <a href="https://github.com/starfishing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/HTML+CSS/" class="nav-link">HTML+CSS</a></div><div class="nav-item"><a href="/blog/JavaScript/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/blog/React/" class="nav-link">React</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/VuePress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/electron/" class="nav-link">electron</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vue官方文档解读/" class="nav-link">vue官方文档解读</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/关于双向绑定的探索/" class="nav-link">关于双向绑定的探索</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/源码学习/" class="nav-link">源码学习</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/问题记录/" class="nav-link">问题记录</a></li></ul></div></div><div class="nav-item"><a href="/blog/命名规范/" class="nav-link">命名规范</a></div><div class="nav-item"><a href="/blog/图床/" class="nav-link">图床</a></div><div class="nav-item"><a href="/blog/大前端/" class="nav-link">大前端</a></div> <a href="https://github.com/starfishing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog/JavaScript/" class="sidebar-link">笔记</a></li><li><a href="/blog/JavaScript/Asyncawait和Promise的不为人知的秘密.html" class="sidebar-link">【译】Async/await和Promise的不为人知的秘密</a></li><li><a href="/blog/JavaScript/ES6、ES7、ES8、ES9、ES10新特性一览.html" class="sidebar-link">ES6、ES7、ES8、ES9、ES10新特性一览</a></li><li><a href="/blog/JavaScript/JS中AMD、CMD、CommonJS、ES6 Module的区别.html" class="sidebar-link">JS 中 AMD、CMD、CommonJS、ES6 Module 的区别</a></li><li><a href="/blog/JavaScript/JS实现双向链表.html" class="sidebar-link">JS实现双链表</a></li><li><a href="/blog/JavaScript/JS类型隐式转换.html" class="active sidebar-link">JS 类型隐式转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_1、js-数据类型" class="sidebar-link">1、js 数据类型</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#隐式转换中主要涉及到三种转换：" class="sidebar-link">隐式转换中主要涉及到三种转换：</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_2-1、通过-toprimitive-将值转换为原始值" class="sidebar-link">2.1、通过 ToPrimitive 将值转换为原始值</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_2-1-1、如果-preferredtype-被标记为-number，则会进行下面的操作流程来转换输入的值。" class="sidebar-link">2.1.1、如果 PreferredType 被标记为 Number，则会进行下面的操作流程来转换输入的值。</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_2-1-2、如果-preferredtype-被标记为-string，则会进行下面的操作流程来转换输入的值。" class="sidebar-link">2.1.2、如果 PreferredType 被标记为 String，则会进行下面的操作流程来转换输入的值。</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#既然-preferredtype-是可选参数，那么如果没有这个参数时，怎么转换呢？" class="sidebar-link">既然 PreferredType 是可选参数，那么如果没有这个参数时，怎么转换呢？</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_2-1-3、valueof-方法和-tostring-方法解析" class="sidebar-link">2.1.3、valueOf 方法和 toString 方法解析</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#上面主要提及到了-valueof-方法和-tostring-方法，那这两个方法在对象里是否一定存在呢？" class="sidebar-link">上面主要提及到了 valueOf 方法和 toString 方法，那这两个方法在对象里是否一定存在呢？</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#对象的-valueof-函数，其转换结果是什么？" class="sidebar-link">对象的 valueOf 函数，其转换结果是什么？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_1、number、boolean、string-这三种构造函数生成的基础值的对象形式，通过-valueof-转换后会变成相应的原始值。如：" class="sidebar-link">1、Number、Boolean、String 这三种构造函数生成的基础值的对象形式，通过 valueOf 转换后会变成相应的原始值。如：</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_2、date-这种特殊的对象，其原型-date-prototype-上内置的-valueof-函数将日期转换为日期的毫秒的形式的数值。" class="sidebar-link">2、Date 这种特殊的对象，其原型 Date.prototype 上内置的 valueOf 函数将日期转换为日期的毫秒的形式的数值。</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_3、除此之外返回的都为-this，即对象本身：" class="sidebar-link">3、除此之外返回的都为 this，即对象本身：</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#tostring-函数，其转换结果是什么？" class="sidebar-link">toString 函数，其转换结果是什么？</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#除这些对象及其实例化对象之外，其他对象返回的都是该对象的类型，都是继承的-object-prototype-tostring-方法。" class="sidebar-link">除这些对象及其实例化对象之外，其他对象返回的都是该对象的类型，都是继承的 Object.prototype.toString 方法。</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#从上面-valueof-和-tostring-两个函数对对象的转换可以看出为什么对于-toprimitive-input-preferredtype" class="sidebar-link">从上面 valueOf 和 toString 两个函数对对象的转换可以看出为什么对于 ToPrimitive(input, PreferredType?)</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_2-2、通过-to-number-将值转换为数字" class="sidebar-link">2.2、通过 To Number 将值转换为数字</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#类型相同时，没有类型转换，主要注意-nan-不与任何值相等，包括它自己，即-nan-nan。" class="sidebar-link">类型相同时，没有类型转换，主要注意 NaN 不与任何值相等，包括它自己，即 NaN !== NaN。</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#在比较的时候可以转换数据类型，若等式两边数据类型不相同，将会往数值类型方向转换后再进行比较" class="sidebar-link">==在比较的时候可以转换数据类型，若等式两边数据类型不相同，将会往数值类型方向转换后再进行比较</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#注意" class="sidebar-link">注意</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript/JS类型隐式转换.html#_3-1、-例子解析" class="sidebar-link">3.1、== 例子解析</a></li></ul></li></ul></li><li><a href="/blog/JavaScript/JavaScript 执行机制.html" class="sidebar-link">JavaScript 执行机制</a></li><li><a href="/blog/JavaScript/JavaScript 数据类型与类型判断详解.html" class="sidebar-link">JavaScript 数据类型与类型判断详解</a></li><li><a href="/blog/JavaScript/Symbol.iterator.html" class="sidebar-link">Symbol.iterator</a></li><li><a href="/blog/JavaScript/asyncawait遇到map和reduce.html" class="sidebar-link">async/await遇到map和reduce</a></li><li><a href="/blog/JavaScript/js利用H5的requestAnimationFrame() API实现动画效果.html" class="sidebar-link">requestAnimationFrame() API 实现动画效果</a></li><li><a href="/blog/JavaScript/webworker.html" class="sidebar-link">webworker</a></li><li><a href="/blog/JavaScript/不定参数.html" class="sidebar-link">关于 Add(2)(3)问题</a></li><li><a href="/blog/JavaScript/动态创建 Script标签.html" class="sidebar-link">动态创建 Script 标签</a></li><li><a href="/blog/JavaScript/动态换肤.html" class="sidebar-link">关于动态换肤的解决方案</a></li><li><a href="/blog/JavaScript/原型与原型链.html" class="sidebar-link">原型与原型链</a></li><li><a href="/blog/JavaScript/反思闭包.html" class="sidebar-link">反思闭包</a></li><li><a href="/blog/JavaScript/在JS如何让同一个值连等于为真.html" class="sidebar-link">在 JS 中，如何让(a===1 &amp;&amp; a===2 &amp;&amp; a === 3)(严格相等)的值为 true</a></li><li><a href="/blog/JavaScript/将嵌套数组转换为一维数组.html" class="sidebar-link">将嵌套数组转换为一维数组</a></li><li><a href="/blog/JavaScript/带你用Node了解JSONP实现原理.html" class="sidebar-link">带你用 Node 了解 JSONP 实现原理</a></li><li><a href="/blog/JavaScript/观察者模式.html" class="sidebar-link">实现观察者模式</a></li><li><a href="/blog/JavaScript/页面跳转以及刷新常用实现方式.html" class="sidebar-link">页面跳转以及刷新常用实现方式</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-类型隐式转换"><a href="#js-类型隐式转换" aria-hidden="true" class="header-anchor">#</a> JS 类型隐式转换</h1> <h2 id="_1、js-数据类型"><a href="#_1、js-数据类型" aria-hidden="true" class="header-anchor">#</a> 1、js 数据类型</h2> <p>js 中有 7 种数据类型，可以分为两类：原始类型、对象类型：</p> <p>基础类型(原始值)：</p> <p>Undefined、 Null、 String、 Number、 Boolean、 Symbol (es6 新出的，本文不讨论这种类型)
复杂类型(对象值)：</p> <p>object</p> <h1 id="_2、三种隐式转换类型"><a href="#_2、三种隐式转换类型" aria-hidden="true" class="header-anchor">#</a> 2、三种隐式转换类型</h1> <p>js 中一个难点就是 js 隐形转换，因为 js 在一些操作符下其类型会做一些变化，所以 js 灵活，同时造成易出错，并且难以理解。</p> <p>涉及隐式转换最多的两个运算符 + 和 ==。</p> <p>+运算符即可数字相加，也可以字符串相加。所以转换时很麻烦，有些也比较难理解：</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token string">&quot;[object Object]&quot;</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token string">&quot;a&quot;</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token string">&quot;a&quot;</span>
<span class="token string">&quot;a&quot;</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token string">&quot;a[object Object]&quot;</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token string">&quot;1&quot;</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
&quot;<span class="token number">1</span><span class="token punctuation">[</span>object <span class="token builtin">Obje</span>
<span class="token number">0</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token string">'0'</span>
<span class="token string">&quot;10&quot;</span>
null<span class="token operator">+</span><span class="token number">1</span>
<span class="token number">1</span>
null<span class="token operator">+</span><span class="token string">&quot;q&quot;</span>
<span class="token string">&quot;nullq&quot;</span>
undefined<span class="token operator">+</span><span class="token number">1</span>
<span class="token builtin">NaN</span>
undefined<span class="token operator">+</span><span class="token string">&quot;b&quot;</span>
<span class="token string">&quot;undefinedb&quot;</span>
<span class="token builtin">NaN</span><span class="token operator">+</span><span class="token number">1</span>
<span class="token builtin">NaN</span>
<span class="token builtin">NaN</span><span class="token operator">+</span><span class="token string">&quot;c&quot;</span>
<span class="token string">&quot;NaNc&quot;</span>
</code></pre></div><p>== 不同于===，故也存在隐式转换。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">null</span>
<span class="token boolean">true</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token boolean">false</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span>
<span class="token boolean">false</span>
<span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token boolean">false</span>
<span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token number">0</span>
<span class="token boolean">false</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token boolean">true</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">undefined</span>
a <span class="token operator">==</span> <span class="token number">1</span>
<span class="token boolean">false</span>
</code></pre></div><ul><li><ul><li>/ 这些运算符只会针对 number 类型，故转换的结果只能是转换成 number 类型,比较简单。</li></ul></li></ul> <h1 id="既然要隐式转换，那到底怎么转换呢，应该有一套转换规则，才能追踪最终转换成什么了。"><a href="#既然要隐式转换，那到底怎么转换呢，应该有一套转换规则，才能追踪最终转换成什么了。" aria-hidden="true" class="header-anchor">#</a> 既然要隐式转换，那到底怎么转换呢，应该有一套转换规则，才能追踪最终转换成什么了。</h1> <h2 id="隐式转换中主要涉及到三种转换："><a href="#隐式转换中主要涉及到三种转换：" aria-hidden="true" class="header-anchor">#</a> 隐式转换中主要涉及到三种转换：</h2> <p>1、将值转为原始值，ToPrimitive()。</p> <p>2、将值转为数字，ToNumber()。</p> <p>3、将值转为字符串，ToString()。</p> <h2 id="_2-1、通过-toprimitive-将值转换为原始值"><a href="#_2-1、通过-toprimitive-将值转换为原始值" aria-hidden="true" class="header-anchor">#</a> 2.1、通过 ToPrimitive 将值转换为原始值</h2> <p>js 引擎内部的抽象操作 ToPrimitive 有着这样的签名：</p> <p>ToPrimitive(input, PreferredType?)</p> <p>input 是要转换的值，PreferredType 是可选参数，可以是 Number 或 String 类型。
他只是一个转换标志，转化后的结果并不一定是这个参数所值的类型，但是转换结果一定是一个原始值（或者报错）。</p> <h2 id="_2-1-1、如果-preferredtype-被标记为-number，则会进行下面的操作流程来转换输入的值。"><a href="#_2-1-1、如果-preferredtype-被标记为-number，则会进行下面的操作流程来转换输入的值。" aria-hidden="true" class="header-anchor">#</a> 2.1.1、如果 PreferredType 被标记为 Number，则会进行下面的操作流程来转换输入的值。</h2> <p>1、如果输入的值已经是一个原始值，则直接返回它
2、否则，如果输入的值是一个对象，则调用该对象的 valueOf()方法，
如果 valueOf()方法的返回值是一个原始值，则返回这个原始值。
3、否则，调用这个对象的 toString()方法，如果 toString()方法返回的是一个原始值，则返回这个原始值。
4、否则，抛出 TypeError 异常。</p> <h2 id="_2-1-2、如果-preferredtype-被标记为-string，则会进行下面的操作流程来转换输入的值。"><a href="#_2-1-2、如果-preferredtype-被标记为-string，则会进行下面的操作流程来转换输入的值。" aria-hidden="true" class="header-anchor">#</a> 2.1.2、如果 PreferredType 被标记为 String，则会进行下面的操作流程来转换输入的值。</h2> <p>1、如果输入的值已经是一个原始值，则直接返回它
2、否则，调用这个对象的 toString()方法，如果 toString()方法返回的是一个原始值，则返回这个原始值。
3、否则，如果输入的值是一个对象，则调用该对象的 valueOf()方法，
如果 valueOf()方法的返回值是一个原始值，则返回这个原始值。
4、否则，抛出 TypeError 异常。</p> <h2 id="既然-preferredtype-是可选参数，那么如果没有这个参数时，怎么转换呢？"><a href="#既然-preferredtype-是可选参数，那么如果没有这个参数时，怎么转换呢？" aria-hidden="true" class="header-anchor">#</a> 既然 PreferredType 是可选参数，那么如果没有这个参数时，怎么转换呢？</h2> <p>PreferredType 的值会按照这样的规则来自动设置：</p> <p>1、该对象为 Date 类型，则 PreferredType 被设置为 String</p> <p>2、否则，PreferredType 被设置为 Number</p> <h2 id="_2-1-3、valueof-方法和-tostring-方法解析"><a href="#_2-1-3、valueof-方法和-tostring-方法解析" aria-hidden="true" class="header-anchor">#</a> 2.1.3、valueOf 方法和 toString 方法解析</h2> <h2 id="上面主要提及到了-valueof-方法和-tostring-方法，那这两个方法在对象里是否一定存在呢？"><a href="#上面主要提及到了-valueof-方法和-tostring-方法，那这两个方法在对象里是否一定存在呢？" aria-hidden="true" class="header-anchor">#</a> 上面主要提及到了 valueOf 方法和 toString 方法，那这两个方法在对象里是否一定存在呢？</h2> <p>答案是肯定的。在控制台输出 Object.prototype，你会发现其中就有 valueOf 和 toString 方法，而 Object.prototype 是所有对象原型链顶层原型，所有对象都会继承该原型的方法，故任何对象都会有 valueOf 和 toString 方法。</p> <h2 id="对象的-valueof-函数，其转换结果是什么？"><a href="#对象的-valueof-函数，其转换结果是什么？" aria-hidden="true" class="header-anchor">#</a> 对象的 valueOf 函数，其转换结果是什么？</h2> <p>对于 js 的常见内置对象：Date, Array, Math, Number, Boolean, String, Array, RegExp, Function。</p> <h3 id="_1、number、boolean、string-这三种构造函数生成的基础值的对象形式，通过-valueof-转换后会变成相应的原始值。如："><a href="#_1、number、boolean、string-这三种构造函数生成的基础值的对象形式，通过-valueof-转换后会变成相应的原始值。如：" aria-hidden="true" class="header-anchor">#</a> 1、Number、Boolean、String 这三种构造函数生成的基础值的对象形式，通过 valueOf 转换后会变成相应的原始值。如：</h3> <div class="language-dart extra-class"><pre class="language-dart"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
num<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'12df'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '12df'</span>
<span class="token keyword">var</span> bool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token string">'fd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bool<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_2、date-这种特殊的对象，其原型-date-prototype-上内置的-valueof-函数将日期转换为日期的毫秒的形式的数值。"><a href="#_2、date-这种特殊的对象，其原型-date-prototype-上内置的-valueof-函数将日期转换为日期的毫秒的形式的数值。" aria-hidden="true" class="header-anchor">#</a> 2、Date 这种特殊的对象，其原型 Date.prototype 上内置的 valueOf 函数将日期转换为日期的毫秒的形式的数值。</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1532234132475</span>
</code></pre></div><h2 id="_3、除此之外返回的都为-this，即对象本身："><a href="#_3、除此之外返回的都为-this，即对象本身：" aria-hidden="true" class="header-anchor">#</a> 3、除此之外返回的都为 this，即对象本身：</h2> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> a
<span class="token comment">// true</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> b
<span class="token comment">// true</span>
</code></pre></div><h2 id="tostring-函数，其转换结果是什么？"><a href="#tostring-函数，其转换结果是什么？" aria-hidden="true" class="header-anchor">#</a> toString 函数，其转换结果是什么？</h2> <p>对于 js 的常见内置对象：Date, Array, Math, Number, Boolean, String, Array, RegExp, Function。</p> <p>1、Number、Boolean、String、Array、Date、RegExp、Function 这几种构造函数生成的对象，通过 toString 转换后会变成相应的字符串的形式，因为这些构造函数上封装了自己的 toString 方法。如：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">Boolean</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">RegExp</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token string">'123sd'</span><span class="token punctuation">)</span>
num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'NaN'</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'12df'</span><span class="token punctuation">)</span>
str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '12df'</span>
<span class="token keyword">var</span> bool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token string">'fd'</span><span class="token punctuation">)</span>
bool<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'true'</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '1,2'</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
d<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Sun Jul 22 2018 12:38:42 GMT+0800 (中国标准时间)&quot;</span>
<span class="token keyword">var</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
func<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;function () {}&quot;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Object]&quot;</span>
Math<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Math]&quot;</span>
</code></pre></div><h2 id="除这些对象及其实例化对象之外，其他对象返回的都是该对象的类型，都是继承的-object-prototype-tostring-方法。"><a href="#除这些对象及其实例化对象之外，其他对象返回的都是该对象的类型，都是继承的-object-prototype-tostring-方法。" aria-hidden="true" class="header-anchor">#</a> 除这些对象及其实例化对象之外，其他对象返回的都是该对象的类型，都是继承的 Object.prototype.toString 方法。</h2> <h2 id="从上面-valueof-和-tostring-两个函数对对象的转换可以看出为什么对于-toprimitive-input-preferredtype"><a href="#从上面-valueof-和-tostring-两个函数对对象的转换可以看出为什么对于-toprimitive-input-preferredtype" aria-hidden="true" class="header-anchor">#</a> 从上面 valueOf 和 toString 两个函数对对象的转换可以看出为什么对于 ToPrimitive(input, PreferredType?)</h2> <h4 id="preferredtype-没有设定的时候，除了-date-类型，preferredtype-被设置为-string，其它的会设置成-number。"><a href="#preferredtype-没有设定的时候，除了-date-类型，preferredtype-被设置为-string，其它的会设置成-number。" aria-hidden="true" class="header-anchor">#</a> PreferredType 没有设定的时候，除了 Date 类型，PreferredType 被设置为 String，其它的会设置成 Number。</h4> <ul><li>因为 valueOf 函数会将 Number、String、Boolean 基础类型的对象类型值转换成 基础类型，Date 类型转换为毫秒数，其它的返回对象本身.</li> <li>而 toString 方法会将所有对象转换为字符串。</li> <li>显然对于大部分对象转换，valueOf 转换更合理些，因为并没有规定转换类型，应该尽可能保持原有值，而不应该想 toString 方法一样，一股脑将其转换为字符串。</li></ul> <p>所以对于没有指定 PreferredType 类型时，先进行 valueOf 方法转换更好，故将 PreferredType 设置为 Number 类型。</p> <p>而对于 Date 类型，其进行 valueOf 转换为毫秒数的 number 类型。在进行隐式转换时，没有指定将其转换为 number 类型时，将其转换为那么大的 number 类型的值显然没有多大意义。（不管是在+运算符还是==运算符）还不如转换为字符串格式的日期，所以默认 Date 类型会优先进行 toString 转换。故有以上的规则：</p> <p>PreferredType 没有设置时，Date 类型的对象，PreferredType 默认设置为 String，其他类型对象 PreferredType 默认设置为 Number。</p> <h2 id="_2-2、通过-to-number-将值转换为数字"><a href="#_2-2、通过-to-number-将值转换为数字" aria-hidden="true" class="header-anchor">#</a> 2.2、通过 To Number 将值转换为数字</h2> <p><img src="https:////upload-images.jianshu.io/upload_images/10372596-d428663fe9356a63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/624/format/webp" alt="img"></p> <p>28.png</p> <p>注意：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">'12a'</span><span class="token operator">==</span><span class="token number">12</span>
<span class="token boolean">false</span>
</code></pre></div><h1 id="_2-3、通过-tostring-将值转换为字符串"><a href="#_2-3、通过-tostring-将值转换为字符串" aria-hidden="true" class="header-anchor">#</a> 2.3、通过 ToString 将值转换为字符串</h1> <p>根据参数类型进行下面转换：
undefined ’undefined’
null ’null’
布尔值转换为’true’ 或 ‘false’
数字转换字符串，比如：1.765 转为’1.765’
对象(obj)先进行 ToPrimitive(obj, String)转换得到原始值，在进行 ToString 转换为字符串
讲了这么多，是不是还不是很清晰，先来看看一个例子：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//[object Object]</span>
</code></pre></div><p>两个对象的值进行+运算符，肯定要先进行隐式转换为原始类型才能进行计算。
1、进行 ToPrimitive 转换，由于没有指定 PreferredType 类型，{}会使默认值为 Number，进行 ToPrimitive(input, Number)运算。
2、所以会执行 valueOf 方法，({}).valueOf(),返回的还是{}对象，不是原始值。
3、继续执行 toString 方法，({}).toString(),返回&quot;[object Object]&quot;，是原始值。
故得到最终的结果，&quot;[object Object]&quot; + &quot;[object Object]&quot; = &quot;[object Object][object object]&quot;</p> <p>再来一个指定类型的例子：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token comment">//NaN</span>
</code></pre></div><p>1、首先*运算符只能对 number 类型进行运算，故第一步就是对{}进行 ToNumber 类型转换。
2、由于{}是对象类型，故先进行原始类型转换，ToPrimitive(input, Number)运算。
3、所以会执行 valueOf 方法，({}).valueOf(),返回的还是{}对象，不是原始值。
4、继续执行 toString 方法，({}).toString(),返回&quot;[object Object]&quot;，是原始值。
5、转换为原始值后再进行 ToNumber 运算，&quot;[object Object]&quot;就转换为 NaN。
故最终的结果为 2 * NaN = NaN</p> <h1 id="_3、-运算符隐式转换"><a href="#_3、-运算符隐式转换" aria-hidden="true" class="header-anchor">#</a> 3、== 运算符隐式转换</h1> <h2 id="类型相同时，没有类型转换，主要注意-nan-不与任何值相等，包括它自己，即-nan-nan。"><a href="#类型相同时，没有类型转换，主要注意-nan-不与任何值相等，包括它自己，即-nan-nan。" aria-hidden="true" class="header-anchor">#</a> 类型相同时，没有类型转换，主要注意 NaN 不与任何值相等，包括它自己，即 NaN !== NaN。</h2> <h2 id="在比较的时候可以转换数据类型，若等式两边数据类型不相同，将会往数值类型方向转换后再进行比较"><a href="#在比较的时候可以转换数据类型，若等式两边数据类型不相同，将会往数值类型方向转换后再进行比较" aria-hidden="true" class="header-anchor">#</a> ==在比较的时候可以转换数据类型，若等式两边数据类型不相同，将会往数值类型方向转换后再进行比较</h2> <p>1、x,y 为 null、undefined 两者中一个 // 返回 true</p> <p>2、x、y 为 Number 和 String 类型时，则转换为 Number 类型比较。</p> <p>3、有 Boolean 类型时，Boolean 转化为 Number 类型比较。</p> <p>4、一个 Object 类型，一个 String 或 Number 类型，将 Object 类型进行原始转换后，按上面流程进行原始值比较。</p> <p><img src="https:////upload-images.jianshu.io/upload_images/10372596-a99289f2861c4267.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/720/format/webp" alt="img"></p> <p>27.jpg</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token string">&quot;&quot;</span> <span class="token operator">==</span> <span class="token number">0</span>  <span class="token comment">//ture</span>
<span class="token string">&quot; &quot;</span> <span class="token operator">==</span> <span class="token number">0</span>  <span class="token comment">//ture</span>
<span class="token string">&quot;&quot;</span> <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//false</span>
<span class="token string">&quot;&quot;</span> <span class="token operator">==</span> <span class="token boolean">false</span>  <span class="token comment">//ture</span>
<span class="token string">&quot; &quot;</span> <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//false</span>
</code></pre></div><div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token string">&quot; &quot;</span> <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//false</span>
<span class="token string">&quot; &quot;</span> <span class="token operator">==</span> <span class="token boolean">false</span>  <span class="token comment">//ture</span>
<span class="token string">&quot;hello&quot;</span> <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//false</span>
<span class="token string">&quot;hello&quot;</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token comment">//false</span>
<span class="token string">&quot;0&quot;</span> <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//false</span>
<span class="token string">&quot;0&quot;</span> <span class="token operator">==</span> <span class="token boolean">false</span>  <span class="token comment">//true</span>
<span class="token string">&quot;00&quot;</span> <span class="token operator">==</span> <span class="token boolean">false</span>  <span class="token comment">//true</span>
<span class="token string">&quot;0.00&quot;</span> <span class="token operator">==</span> <span class="token boolean">false</span>  <span class="token comment">//true</span>
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">null</span>  <span class="token comment">//ture</span>
 <span class="token boolean">true</span> <span class="token operator">==</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//false</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//false</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function-variable function">valueOf</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj <span class="token operator">==</span> <span class="token string">&quot;[object Object]&quot;</span>  <span class="token comment">//false</span>
obj <span class="token operator">==</span> <span class="token number">1</span>  <span class="token comment">//true</span>
obj <span class="token operator">==</span> <span class="token boolean">true</span>  <span class="token comment">//true</span>
</code></pre></div><h2 id="注意"><a href="#注意" aria-hidden="true" class="header-anchor">#</a> 注意</h2> <p>1.==等好两边都为对象时，比较的是地址</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">false</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">==</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">false</span>
</code></pre></div><p>2.对象转化成数值为 NaN,数组则不一定。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span>
<span class="token keyword">undefined</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">123</span><span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span>
<span class="token keyword">undefined</span>
<span class="token function">Number</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token number">123</span>
<span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token number">NaN</span>
obj <span class="token operator">==</span> <span class="token number">123</span>
<span class="token boolean">false</span>
arr <span class="token operator">==</span> <span class="token number">123</span>
<span class="token boolean">true</span>
</code></pre></div><p><img src="https:////upload-images.jianshu.io/upload_images/10372596-553fdffd2bd3cd04.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/427/format/webp" alt="img"></p> <p>1.png</p> <h3 id="_3-1、-例子解析"><a href="#_3-1、-例子解析" aria-hidden="true" class="header-anchor">#</a> 3.1、== 例子解析</h3> <p>所以类型不相同时，可以会进行上面几条的比较，比如：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    return1
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'123'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token boolean">true</span> <span class="token operator">==</span> a <span class="token comment">// true;</span>
</code></pre></div><p>boolean 类型进行 ToNumber 转换为 1
object 类型，对 y 进行原始转换，ToPrimitive(a, ?),没有指定转换类型，默认 number 类型。
而后，ToPrimitive(a, Number)首先调用 valueOf 方法，返回 1，得到原始类型 1。
最后 1 == 1， 返回 true。</p> <p>我们再看一段很复杂的比较，如下：</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">true</span>
</code></pre></div><p>1、! 运算符优先级高于==，故先进行！运算。
2、!{}运算结果为 false，结果变成 [] == false 比较。
3、转换数字类型结果变成 [] == 0。
比较变成 ToPrimitive([]) == 0。
按照上面规则进行原始值转换，[]会先调用 valueOf 函数，返回 this。
不是原始值，继续调用 toString 方法， [].toString() = ''。
故结果为 '' == 0 比较。
5、 ToNumber('') = 0。
所以结果变为： 0 == 0，返回 true，比较结束。</p> <p>最后看看这道题目：</p> <p>const a = {
i: 1,
toString: function () {
return a.i++;
}
}
if (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {
console.log('hello world!');
}</p> <p>1、当执行 a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3 时，会从左到右一步一步解析，首先 a == 1，会进行上面第 9 步转换。ToPrimitive(a， Number) == 1。</p> <p>2、ToPrimitive(a, Number)，按照上面原始类型转换规则，会先调用 valueOf 方法，a 的 valueOf 方法继承自 Object.prototype。返回 a 本身，而非原始类型，故会调用 toString 方法。</p> <p>3、因为 toString 被重写，所以会调用重写的 toString 方法，故返回 1，注意这里是 i++，而不是++i，它会先返回 i，在将 i+1。故 ToPrimitive(a, Number) = 1。也就是 1 == 1，此时 i = 1 + 1 = 2。</p> <p>4、执行完 a == 1 返回 true，会执行 a == 2，同理，会调用 ToPrimitive(a, Number)，同上先调用 valueOf 方法，在调用 toString 方法，由于第一步，i = 2 此时，ToPrimitive(a, Number) = 2， 也就是 2 == 2, 此时 i = 2 + 1。</p> <p>5、同上可以推导 a == 3 也返回 true。故最终结果 a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3 返回 true</p> <p>再比如：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token selector">+[]
0
[]+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token string">&quot;[object Object]&quot;</span>
<span class="token selector">0+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token string">&quot;0[object Object]&quot;</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span>+0
0
</code></pre></div><p>是因为{}可以是空块或空对象文字，具体取决于上下文。</p> <ul><li>可以是一元加运算符，也可以是连接运算符，具体取决于上下文。</li></ul> <p>第一个代码示例是一个空块，它可能也不存在，使表达式相同+[]，意思是“空数组转换为数字”。</p> <p>你不能把一个块作为一个函数参数，所以第二个代码示例{}是一个对象，代码的意思是“用一个数组来传递一个对象”（隐式地将对象和数组转换为字符串）。换句话说，{} + []表达式是一个 empty 代码块，后面跟 array 一个数字（Number[]）的约束。</p> <p>在第二个示例中，您只是向 concat 数组提供了一个对象文字（空对象）。这就是你收到的原因[object Object]。
再比如：</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">null</span><span class="token operator">==</span><span class="token number">0</span>
<span class="token keyword">false</span>
<span class="token keyword">null</span><span class="token operator">==</span><span class="token number">1</span>
<span class="token keyword">false</span>
<span class="token operator">+</span><span class="token keyword">null</span>
<span class="token number">0</span>
</code></pre></div><p><a href="http://es5.github.io/#x8.2" target="_blank" rel="noopener noreferrer">Null 类型的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>比较不等于 1 或 0（实际上，null 仅与<code>undefined</code> 相当),但当强制转换 ToNumber（null）===0；</p> <p>最终 null==undefined//true ,实在无法理解，暂时只能理解这就是个坑，强行死记硬背。</p> <p>原文：https://www.jianshu.com/p/7cb41d109b7e</p> <div id="vcomments"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/13/2020, 10:12:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/JavaScript/JS实现双向链表.html" class="prev">
          JS实现双链表
        </a></span> <span class="next"><a href="/blog/JavaScript/JavaScript 执行机制.html">
          JavaScript 执行机制
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.2ae5fea5.js" defer></script><script src="/blog/assets/js/2.6a053b7f.js" defer></script><script src="/blog/assets/js/21.6661e953.js" defer></script><script src="/blog/assets/js/4.2282b1d2.js" defer></script>
  </body>
</html>
