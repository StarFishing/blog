<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>在 JS 中，如何让(a===1 &amp;&amp; a===2 &amp;&amp; a === 3)(严格相等)的值为 true | XiaoXin</title>
    <meta name="description" content="Everything Is Esay">
    <link rel="shortcut icon" href="/blog/favicon.ico">
  <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/blog/assets/css/0.styles.c98d2fd1.css" as="style"><link rel="preload" href="/blog/assets/js/app.2ae5fea5.js" as="script"><link rel="preload" href="/blog/assets/js/2.6a053b7f.js" as="script"><link rel="preload" href="/blog/assets/js/34.216a6e8c.js" as="script"><link rel="preload" href="/blog/assets/js/4.2282b1d2.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.24a80492.js"><link rel="prefetch" href="/blog/assets/js/11.15dd0e81.js"><link rel="prefetch" href="/blog/assets/js/12.80be22dc.js"><link rel="prefetch" href="/blog/assets/js/13.8f3eea23.js"><link rel="prefetch" href="/blog/assets/js/14.4a737e05.js"><link rel="prefetch" href="/blog/assets/js/15.eb07cf8a.js"><link rel="prefetch" href="/blog/assets/js/16.36d73765.js"><link rel="prefetch" href="/blog/assets/js/17.17bc1d4d.js"><link rel="prefetch" href="/blog/assets/js/18.dc604255.js"><link rel="prefetch" href="/blog/assets/js/19.dba65164.js"><link rel="prefetch" href="/blog/assets/js/20.b1e13490.js"><link rel="prefetch" href="/blog/assets/js/21.6661e953.js"><link rel="prefetch" href="/blog/assets/js/22.b46aff83.js"><link rel="prefetch" href="/blog/assets/js/23.f9a4866a.js"><link rel="prefetch" href="/blog/assets/js/24.abc1ee8e.js"><link rel="prefetch" href="/blog/assets/js/25.5c6de7f7.js"><link rel="prefetch" href="/blog/assets/js/26.f0a361d6.js"><link rel="prefetch" href="/blog/assets/js/27.170936fa.js"><link rel="prefetch" href="/blog/assets/js/28.7899db47.js"><link rel="prefetch" href="/blog/assets/js/29.a7194b2b.js"><link rel="prefetch" href="/blog/assets/js/3.ebad0fee.js"><link rel="prefetch" href="/blog/assets/js/30.b2dee036.js"><link rel="prefetch" href="/blog/assets/js/31.c1603b7d.js"><link rel="prefetch" href="/blog/assets/js/32.9b4872ae.js"><link rel="prefetch" href="/blog/assets/js/33.0c4a6762.js"><link rel="prefetch" href="/blog/assets/js/35.c4da4fba.js"><link rel="prefetch" href="/blog/assets/js/36.4004ae2a.js"><link rel="prefetch" href="/blog/assets/js/37.970402d3.js"><link rel="prefetch" href="/blog/assets/js/38.5940f18d.js"><link rel="prefetch" href="/blog/assets/js/39.a9f7a9d7.js"><link rel="prefetch" href="/blog/assets/js/40.cab95d99.js"><link rel="prefetch" href="/blog/assets/js/41.c43504e7.js"><link rel="prefetch" href="/blog/assets/js/42.fea032c4.js"><link rel="prefetch" href="/blog/assets/js/43.d981b84c.js"><link rel="prefetch" href="/blog/assets/js/44.e469946c.js"><link rel="prefetch" href="/blog/assets/js/45.498af734.js"><link rel="prefetch" href="/blog/assets/js/46.5c5381de.js"><link rel="prefetch" href="/blog/assets/js/47.ade54cb1.js"><link rel="prefetch" href="/blog/assets/js/48.543817c4.js"><link rel="prefetch" href="/blog/assets/js/49.170032f2.js"><link rel="prefetch" href="/blog/assets/js/5.bbd49a80.js"><link rel="prefetch" href="/blog/assets/js/50.fdcebebc.js"><link rel="prefetch" href="/blog/assets/js/51.4688ae90.js"><link rel="prefetch" href="/blog/assets/js/52.2f859e2a.js"><link rel="prefetch" href="/blog/assets/js/53.46f20752.js"><link rel="prefetch" href="/blog/assets/js/54.8c4e2bde.js"><link rel="prefetch" href="/blog/assets/js/55.966bf42b.js"><link rel="prefetch" href="/blog/assets/js/56.93296c52.js"><link rel="prefetch" href="/blog/assets/js/57.c0e84a0a.js"><link rel="prefetch" href="/blog/assets/js/58.9c4fac4f.js"><link rel="prefetch" href="/blog/assets/js/59.18ed476c.js"><link rel="prefetch" href="/blog/assets/js/6.3b02335f.js"><link rel="prefetch" href="/blog/assets/js/60.e3ca94f3.js"><link rel="prefetch" href="/blog/assets/js/61.d40e0732.js"><link rel="prefetch" href="/blog/assets/js/62.952d91f1.js"><link rel="prefetch" href="/blog/assets/js/63.03715906.js"><link rel="prefetch" href="/blog/assets/js/64.6dce55d6.js"><link rel="prefetch" href="/blog/assets/js/65.fea30c40.js"><link rel="prefetch" href="/blog/assets/js/66.21bee15e.js"><link rel="prefetch" href="/blog/assets/js/7.64ef9703.js"><link rel="prefetch" href="/blog/assets/js/8.c33961b5.js"><link rel="prefetch" href="/blog/assets/js/9.61bba5ba.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.c98d2fd1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">XiaoXin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/HTML+CSS/" class="nav-link">HTML+CSS</a></div><div class="nav-item"><a href="/blog/JavaScript/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/blog/React/" class="nav-link">React</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/VuePress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/electron/" class="nav-link">electron</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vue官方文档解读/" class="nav-link">vue官方文档解读</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/关于双向绑定的探索/" class="nav-link">关于双向绑定的探索</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/源码学习/" class="nav-link">源码学习</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/问题记录/" class="nav-link">问题记录</a></li></ul></div></div><div class="nav-item"><a href="/blog/命名规范/" class="nav-link">命名规范</a></div><div class="nav-item"><a href="/blog/图床/" class="nav-link">图床</a></div><div class="nav-item"><a href="/blog/大前端/" class="nav-link">大前端</a></div> <a href="https://github.com/starfishing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/HTML+CSS/" class="nav-link">HTML+CSS</a></div><div class="nav-item"><a href="/blog/JavaScript/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/blog/React/" class="nav-link">React</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/VuePress/" class="nav-link">VuePress</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/electron/" class="nav-link">electron</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vue官方文档解读/" class="nav-link">vue官方文档解读</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/关于双向绑定的探索/" class="nav-link">关于双向绑定的探索</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/源码学习/" class="nav-link">源码学习</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/问题记录/" class="nav-link">问题记录</a></li></ul></div></div><div class="nav-item"><a href="/blog/命名规范/" class="nav-link">命名规范</a></div><div class="nav-item"><a href="/blog/图床/" class="nav-link">图床</a></div><div class="nav-item"><a href="/blog/大前端/" class="nav-link">大前端</a></div> <a href="https://github.com/starfishing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog/JavaScript/" class="sidebar-link">笔记</a></li><li><a href="/blog/JavaScript/Asyncawait和Promise的不为人知的秘密.html" class="sidebar-link">【译】Async/await和Promise的不为人知的秘密</a></li><li><a href="/blog/JavaScript/ES6、ES7、ES8、ES9、ES10新特性一览.html" class="sidebar-link">ES6、ES7、ES8、ES9、ES10新特性一览</a></li><li><a href="/blog/JavaScript/JS中AMD、CMD、CommonJS、ES6 Module的区别.html" class="sidebar-link">JS 中 AMD、CMD、CommonJS、ES6 Module 的区别</a></li><li><a href="/blog/JavaScript/JS实现双向链表.html" class="sidebar-link">JS实现双链表</a></li><li><a href="/blog/JavaScript/JS类型隐式转换.html" class="sidebar-link">JS 类型隐式转换</a></li><li><a href="/blog/JavaScript/JavaScript 执行机制.html" class="sidebar-link">JavaScript 执行机制</a></li><li><a href="/blog/JavaScript/JavaScript 数据类型与类型判断详解.html" class="sidebar-link">JavaScript 数据类型与类型判断详解</a></li><li><a href="/blog/JavaScript/Symbol.iterator.html" class="sidebar-link">Symbol.iterator</a></li><li><a href="/blog/JavaScript/asyncawait遇到map和reduce.html" class="sidebar-link">async/await遇到map和reduce</a></li><li><a href="/blog/JavaScript/js利用H5的requestAnimationFrame() API实现动画效果.html" class="sidebar-link">requestAnimationFrame() API 实现动画效果</a></li><li><a href="/blog/JavaScript/webworker.html" class="sidebar-link">webworker</a></li><li><a href="/blog/JavaScript/不定参数.html" class="sidebar-link">关于 Add(2)(3)问题</a></li><li><a href="/blog/JavaScript/动态创建 Script标签.html" class="sidebar-link">动态创建 Script 标签</a></li><li><a href="/blog/JavaScript/动态换肤.html" class="sidebar-link">关于动态换肤的解决方案</a></li><li><a href="/blog/JavaScript/原型与原型链.html" class="sidebar-link">原型与原型链</a></li><li><a href="/blog/JavaScript/反思闭包.html" class="sidebar-link">反思闭包</a></li><li><a href="/blog/JavaScript/在JS如何让同一个值连等于为真.html" class="active sidebar-link">在 JS 中，如何让(a===1 &amp;&amp; a===2 &amp;&amp; a === 3)(严格相等)的值为 true</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript/在JS如何让同一个值连等于为真.html#如何使用-getter-setter-描述符让-a-1-a-2-a-3-的值为-true" class="sidebar-link">如何使用 getter/setter 描述符让(a===1 &amp;&amp; a===2 &amp;&amp; a === 3)的值为 true</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JavaScript/在JS如何让同一个值连等于为真.html#重温-a-1-a-2-a-3-宽松相等-问题" class="sidebar-link">重温(a==1&amp;&amp;a==2&amp;&amp;a==3)(宽松相等)问题</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/在JS如何让同一个值连等于为真.html#a-1-a-2-a-3-严格匹配-问题" class="sidebar-link">(a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3)(严格匹配) 问题</a></li><li class="sidebar-sub-header"><a href="/blog/JavaScript/在JS如何让同一个值连等于为真.html#参考" class="sidebar-link">参考</a></li></ul></li></ul></li><li><a href="/blog/JavaScript/将嵌套数组转换为一维数组.html" class="sidebar-link">将嵌套数组转换为一维数组</a></li><li><a href="/blog/JavaScript/带你用Node了解JSONP实现原理.html" class="sidebar-link">带你用 Node 了解 JSONP 实现原理</a></li><li><a href="/blog/JavaScript/观察者模式.html" class="sidebar-link">实现观察者模式</a></li><li><a href="/blog/JavaScript/页面跳转以及刷新常用实现方式.html" class="sidebar-link">页面跳转以及刷新常用实现方式</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="在-js-中，如何让-a-1-a-2-a-3-严格相等-的值为-true"><a href="#在-js-中，如何让-a-1-a-2-a-3-严格相等-的值为-true" aria-hidden="true" class="header-anchor">#</a> 在 JS 中，如何让(a===1 &amp;&amp; a===2 &amp;&amp; a === 3)(严格相等)的值为 true</h1> <p>原文: <a href="http://theanubhav.com/2018/11/07/understanding-primitive-and-getter-setters/" target="_blank" rel="noopener noreferrer">Will (a===1 &amp;&amp; a===2 &amp;&amp; a===3) (strict comparison) ever be true (in JavaScript)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>本文是 JS 经典问题(a == 1 &amp;&amp; a==2 &amp;&amp; a==3)(宽松相等)的扩展和解决方案</p></blockquote> <h2 id="如何使用-getter-setter-描述符让-a-1-a-2-a-3-的值为-true"><a href="#如何使用-getter-setter-描述符让-a-1-a-2-a-3-的值为-true" aria-hidden="true" class="header-anchor">#</a> 如何使用 getter/setter 描述符让(a===1 &amp;&amp; a===2 &amp;&amp; a === 3)的值为 true</h2> <p>我们先简单了解  这道 JS 经典问题, 然后再解决它的扩展问题。</p> <p>内容概览:</p> <ul><li>重温(a==1&amp;&amp;a==2&amp;&amp;a==3)(宽松相等)问题
<ul><li><a href="https://juejin.im/post/5bfcc632f265da61493353cc#traditional-problem" target="_blank" rel="noopener noreferrer">(a==1&amp;&amp;a==2&amp;&amp;a==3)问题描述<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5bfcc632f265da61493353cc#tradition-problem-explanation" target="_blank" rel="noopener noreferrer">答案与解释<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li>(a===1&amp;&amp;a===2&amp;&amp;a===3)扩展问题
<ul><li>问题答案与解释
<ul><li><a href="https://juejin.im/post/5bfcc632f265da61493353cc#descriptors" target="_blank" rel="noopener noreferrer">什么是属性描述符<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></li> <li><a href="https://juejin.im/post/5bfcc632f265da61493353cc#refer" target="_blank" rel="noopener noreferrer">参考文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="重温-a-1-a-2-a-3-宽松相等-问题"><a href="#重温-a-1-a-2-a-3-宽松相等-问题" aria-hidden="true" class="header-anchor">#</a> 重温(a==1&amp;&amp;a==2&amp;&amp;a==3)(宽松相等)问题</h3> <p>如果你已经了解过这个问题并且知道如何解决这个 JS 谜题(是的，只是一个谜题，我并不想在生产代码中看到这样的用例) , 那你可以直接跳到下一节，阅读它的扩展问题。关于这个问题在<a href="https://www.reddit.com/r/javascript/comments/7r0i00/can_a_1_a_2_a3_ever_evaluate_to_true/" target="_blank" rel="noopener noreferrer">reddit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>上有相关讨论， 下面是我看到最有趣的评论</p> <p>&quot;如果我在代码库中看到这样的代码，我可能就很绝望了&quot; // 译者注: 谁看到都会很绝望吧</p> <h4 id="a-1-a-2-a-3-问题"><a href="#a-1-a-2-a-3-问题" aria-hidden="true" class="header-anchor">#</a> (a==1 &amp;&amp; a== 2 &amp;&amp; a ==3 )问题</h4> <blockquote><p>(a ==1 &amp;&amp; a==2 &amp;&amp; a==3) 的值可以是 true 吗？</p></blockquote> <p>回答是肯定的, 具体可以看下面的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
a<span class="token punctuation">.</span><span class="token function-variable function">valueOf</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
复制代码
</code></pre></div><p>通常, 在面试中问这类问题的目的并不是要求面试者记住这样的答案，而是想要了解面试者在面对这道题目时，是如何思考的以及他们是否有了解过 Javascript 中关于<code>==</code>的奇特的语法特性。</p> <h4 id="问题解析"><a href="#问题解析" aria-hidden="true" class="header-anchor">#</a> 问题解析</h4> <p>秘密就在于&quot;宽松相等操作符 <code>==</code> &quot;</p> <p>在 JS 中，宽松相等<code>==</code>会先将左右两两边的值转化成相同的原始类型，然后再去比较他们是否相等。在转化之后(<code>==</code>一边或两边都需要转化)，最后的相等匹配会像<code>===</code>符号一样去执行判断。宽松相等是可逆的，对于任何值 A 与 B，通常<code>A == B</code>与<code>B == A</code>具有相同的表现(除了转换的顺序不同)。可以在<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>详细深度地了解宽松匹配<code>==</code>与严格匹配<code>===</code>。</p> <p>Javascript 会如何强制转换这个值呢？</p> <p>在进行两个值的比较时，执行了类型的强制转换， 让我们先了解下内置的转换函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">ToPrimitive</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> PreferredType<span class="token operator">?</span><span class="token punctuation">)</span>
复制代码
</code></pre></div><p>可选参数<code>PreferredType</code>可以指定最终转化的类型，它可以是<code>Number</code>类型或<code>String</code>类型，这依赖于<code>ToPrimitive()</code>方法执行的结果返回的是<code>Number</code>类型或<code>String</code>类型。</p> <p>值的转化过程如下</p> <ol><li>如果输入 Input 是基本类型, 就返回这个值</li> <li>如果输入变量是 Object 类型, 那么调用 input.valueOf(). 如果返回结果是基本类型，就返回这个指</li> <li>如果都不是的话就调用 input.toString(). 如果结果是基本类型, 就返回它</li> <li>如果以上都不可以，就会抛出一个类型错误<code>TypeError</code>， 表示转化 input 变量到基本类型失败。</li></ol> <p>如果<code>PreferredType</code>是<code>Number</code>， 那转换算法就会像上述说明的顺序执行，如果是<code>String</code>，步骤 2 和步骤 3 会交换顺序。<code>PreferredType</code>是一个缺省值，如果不输入的话，<code>Date</code>类型会被当作<code>String</code>类型处理，其他变量会当作<code>Number</code>处理。默认的<code>valueOf</code>返回<code>this</code>，默认的 toString()会返回类型信息。</p> <p>如上是操作符<code>+</code>和<code>==</code>调用<code>toPrimitive()</code>的执行过程。</p> <p>所以在上面的代码中, 如 JS 引擎所解析的，<code>a == 1</code>， <code>1</code>是基本类型, JS 引擎会尝试将<code>a</code>转换成<code>Number</code>类型，然后在上面的算法中，<code>a.valueOf</code>被调用并且返回 1(自增 1 并且返回自己)。在<code>a==2</code>和<code>a==3</code>发生了同样的类型转换并增加自己的值。</p> <h3 id="a-1-a-2-a-3-严格匹配-问题"><a href="#a-1-a-2-a-3-严格匹配-问题" aria-hidden="true" class="header-anchor">#</a> (a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3)(严格匹配) 问题</h3> <blockquote><p>(a === 1 &amp;&amp; a === 2 &amp;&amp; a ===3)的值也能是 true 吗？</p></blockquote> <p>当然也可以, 具体请看下面的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">//window.value</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
复制代码
</code></pre></div><h4 id="问题解释"><a href="#问题解释" aria-hidden="true" class="header-anchor">#</a> 问题解释</h4> <p>从经典问题的解答中，我们了解到 JS 中的原始类型将不再满足于上面的条件(严格相等没有转化的过程)，所以我们需要通过一些方式去调用一个函数，并在这个函数中做我们想做的事情。但是执行函数往往需要在函数名字后引入<code>()</code>。并且由于这里不是宽松相等<code>==</code>，<code>valueOf</code>将不会被 JS 引擎调用。Emmm, 有点棘手。还好有<code>Property</code>函数, 特别是<code>getter</code>描述符， 带来了解决这个问题的办法。</p> <h5 id="什么是属性描述符-property-descriptors"><a href="#什么是属性描述符-property-descriptors" aria-hidden="true" class="header-anchor">#</a> 什么是属性描述符(property descriptors)?</h5> <p>属性描述符有两种类型, 数据描述符和存取描述符。</p> <ol><li><p>数据描述符</p> <p>强制键值 - value</p> <p>可选键值</p> <div class="language- extra-class"><pre class="language-text"><code> - configurable
 - enumable
 - writeable
复制代码
</code></pre></div><p>例子</p> <div class="language- extra-class"><pre class="language-text"><code>{
    value: 5,
    writable: true
}
复制代码
</code></pre></div></li> <li><p>存取描述符</p> <p>强制键值 - get/set 或都设定 可选键值 - confiturable - enumerable 例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div></li></ol> <p>MDN 上关于存取描述符的例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Example of an object property added</span>
<span class="token comment">// with defineProperty with an accessor property descriptor</span>

<span class="token keyword">var</span> bValue <span class="token operator">=</span> <span class="token number">38</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// Using shorthand method names (ES2015 feature).</span>
  <span class="token comment">// This is equivalent to:</span>
  <span class="token comment">// get: function() { return bValue; },</span>
  <span class="token comment">// set: function(newValue) { bValue = newValue; },</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> bValue
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bValue <span class="token operator">=</span> newValue
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  configurable<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
o<span class="token punctuation">.</span>b <span class="token comment">// 38</span>
<span class="token comment">// 'b' property exists in the o object and its value is 38</span>
<span class="token comment">// The value of o.b is now always identical to bValue,</span>
<span class="token comment">// unless o.b is redefined</span>
复制代码
</code></pre></div><p>在问题的解决方案中, 我们使用<code>Object.defineProperty</code>为对象定义了一个属性。你可以在<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>深入了解<code>Object.defineProperty</code>的语法与定义。 有趣的是，<code>get</code> 和 <code>set</code>是可以通过<code>&quot;.&quot;操作符</code>调用的方法, 举个例子, <code>a</code>有一个具有<code>getter</code>的<code>b</code>属性,  它可以像对象的其他属性一样去调用，类似于<code>a.b</code>。这可以解决我们最初的问题, 我们需要调用一个无需<code>()</code>的函数, 通过<code>get</code>属性, 我们可以调用一个函数并且不用在函数名后添加<code>()</code></p> <p>在上面提到的解决方案中, 我们在 window 对象上定义了一个  具有 getter 的<code>a</code>属性, 所以<code>a</code>可以在代码中直接被访问到(全局变量)， 因此也可以直接获得 a 的值。如果我们在其他对象上定义了属性<code>a</code>而不是 window 的话，例如 object1， 我们就需要改变题目为<code>object1.a===1 &amp;&amp; object1.a===2 &amp;&amp; object1.a===3</code>了。</p> <h4 id="github-gist"><a href="#github-gist" aria-hidden="true" class="header-anchor">#</a> Github Gist</h4> <ul><li><a href="https://gist.github.com/anubhavsrivastava/4680a165db9e1abc459c5987e778a674" target="_blank" rel="noopener noreferrer">Problem (a==1 &amp;&amp; a==2 &amp;&amp; a==3)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://gist.github.com/anubhavsrivastava/2bd7cd81fb23d138df99c47988855adc" target="_blank" rel="noopener noreferrer">Problem (a===1 &amp;&amp; a===2 &amp;&amp; a===3)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="参考"><a href="#参考" aria-hidden="true" class="header-anchor">#</a> 参考</h3> <ul><li><p><a href="https://www.reddit.com/r/javascript/comments/7r0i00/can_a_1_a_2_a3_ever_evaluate_to_true/" target="_blank" rel="noopener noreferrer">Reddit Post<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="http://speakingjs.com/es5/ch17.html" target="_blank" rel="noopener noreferrer">Speaking JS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="noopener noreferrer">MDN web-docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div id="vcomments"></div></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/13/2020, 10:12:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/JavaScript/反思闭包.html" class="prev">
          反思闭包
        </a></span> <span class="next"><a href="/blog/JavaScript/将嵌套数组转换为一维数组.html">
          将嵌套数组转换为一维数组
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.2ae5fea5.js" defer></script><script src="/blog/assets/js/2.6a053b7f.js" defer></script><script src="/blog/assets/js/34.216a6e8c.js" defer></script><script src="/blog/assets/js/4.2282b1d2.js" defer></script>
  </body>
</html>
